(()=>{"use strict";const e=new XMLHttpRequest,t=document.getElementById("right"),d=document.getElementById("select"),n=document.getElementById("left"),s=document.getElementById("date-data");t.addEventListener("click",(()=>{d.style.display="none",n.style.display="block"})),n.addEventListener("click",(()=>{n.style.display="none",d.style.display="flex"})),new Promise((function(e,t){for(let e=0;e<15;e++){var d=moment().subtract(e,"days").format("YYYY[/]MM[/]D");let t=document.createElement("div");t.id="id"+e,t.dataset.send=moment().subtract(e,"days").format("YYYY[-]MM[-]D");let n=document.createTextNode(d);t.appendChild(n),s.appendChild(t)}e()})).then((()=>{document.getElementById("id0"),document.getElementById("id1"),document.getElementById("id2"),document.getElementById("id3"),document.getElementById("id4"),document.getElementById("id5"),document.getElementById("id6"),document.getElementById("id7"),document.getElementById("id8"),document.getElementById("id9"),document.getElementById("id10"),document.getElementById("id11"),document.getElementById("id12"),document.getElementById("id13"),document.getElementById("id14");const t=document.getElementById("date"),d=document.getElementById("day"),n=document.getElementById("month"),s=document.getElementById("year"),a=document.getElementById("homework"),m=document.getElementById("grade-record");function l(l){document.getElementById(l).addEventListener("click",(()=>{m.innerText="",a.innerText="",function(l){e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){let i=JSON.parse(this.responseText);if(null==i[0])alert("nodata");else{n.innerText=i[0].months,t.innerText=i[0].dates,s.innerText=i[0].years,1==i[0].dayss?i[0].dayss="(一)":2==i[0].dayss?i[0].dayss="(二)":3==i[0].dayss?i[0].dayss="(三)":4==i[0].dayss?i[0].dayss="(四)":5==i[0].dayss?i[0].dayss="(五)":6==i[0].dayss?i[0].dayss="(六)":7==i[0].dayss&&(i[0].dayss="(日)"),d.innerText=i[0].dayss;let c=`${i[0].years}-${i[0].months}-${i[0].dates}`,y=moment(c),u=null,r=0;for(let t=0;t<i.length;t++){var e=y.to(i[t].jobdate);if("a few seconds ago"==e?u="今天":"in a day"==e?u="明天":"in 2 days"==e?u="後天":"in 7 days"==e&&(u="下禮拜"),"登記"==i[t].sendjob){r++;var l=document.createElement("div"),o=document.createTextNode(`${i[t].sendlist}${i[t].pages}${i[t].dess}`);l.appendChild(o),m.appendChild(l)}else null==u?(l=document.createElement("div"),o=document.createTextNode(`${t+1-r}. ${i[t].jobdate}${i[t].sendjob}${i[t].sendlist}${i[t].pages}${i[t].dess}`),l.appendChild(o),a.appendChild(l)):(l=document.createElement("div"),o=document.createTextNode(`${t+1-r}. ${u}${i[t].sendjob}${i[t].sendlist}${i[t].pages}${i[t].dess}`),l.appendChild(o),a.appendChild(l))}}}},e.open("GET",`http://127.0.0.1/paula-class/server/log.php?date=${document.getElementById(l).dataset.send}`),e.send()}(l)}))}for(var o=0;o<15;o++)l("id"+o)}))})();