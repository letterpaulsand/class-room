(()=>{"use strict";const e=new XMLHttpRequest,t=document.getElementById("right"),d=document.getElementById("select"),n=document.getElementById("left"),s=document.getElementById("date-data");t.addEventListener("click",(()=>{d.style.display="none",n.style.display="block"})),n.addEventListener("click",(()=>{n.style.display="none",d.style.display="flex"})),new Promise((function(e,t){for(let e=0;e<15;e++){var d=moment().subtract(e,"days").format("YYYY[/]MM[/]D");let t=document.createElement("div");t.id="id"+e,t.dataset.send=moment().subtract(e,"days").format("YYYY[-]MM[-]D");let n=document.createTextNode(d);t.appendChild(n),s.appendChild(t)}e()})).then((()=>{const t=document.getElementById("date"),d=document.getElementById("day"),n=document.getElementById("month"),s=document.getElementById("year"),a=document.getElementById("homework"),o=document.getElementById("grade-record");function l(l){e.onreadystatechange=function(){if(4==this.readyState&&200==this.status)if("2[]"==this.responseText)alert("No Data!");else{let c=JSON.parse(this.responseText);n.innerText=c[0].months,t.innerText=c[0].dates,s.innerText=c[0].years,1==c[0].dayss?c[0].dayss="(一)":2==c[0].dayss?c[0].dayss="(二)":3==c[0].dayss?c[0].dayss="(三)":4==c[0].dayss?c[0].dayss="(四)":5==c[0].dayss?c[0].dayss="(五)":6==c[0].dayss?c[0].dayss="(六)":7==c[0].dayss&&(c[0].dayss="(日)"),d.innerText=c[0].dayss;let m=`${c[0].years}-${c[0].months}-${c[0].dates}`,r=moment(m),y=null,p=0;for(let t=0;t<c.length;t++){var e=r.to(c[t].jobdate);if("a few seconds ago"==e?y="今天":"in a day"==e?y="明天":"in 2 days"==e?y="後天":"in 7 days"==e&&(y="下禮拜"),"登記"==c[t].sendjob){p++;var l=document.createElement("div"),i=document.createTextNode(`${c[t].sendlist}${c[t].pages}${c[t].dess}`);l.appendChild(i),o.appendChild(l)}else null==y?(l=document.createElement("div"),i=document.createTextNode(`${t+1-p}. ${c[t].jobdate}${c[t].sendjob}${c[t].sendlist}${c[t].pages}${c[t].dess}`),l.appendChild(i),a.appendChild(l)):(l=document.createElement("div"),i=document.createTextNode(`${t+1-p}. ${y}${c[t].sendjob}${c[t].sendlist}${c[t].pages}${c[t].dess}`),l.appendChild(i),a.appendChild(l))}}},e.open("GET",`http://127.0.0.1/paula-class/server/log.php?date=${document.getElementById(l).dataset.send}`),e.send()}function i(e){document.getElementById(e).addEventListener("click",(()=>{o.innerText="",a.innerText="",l(e)}))}for(var c=0;c<15;c++)i("id"+c);l("id0")}))})();